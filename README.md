ETL Проект для данных о погоде в моем любимом городе Казани

## Описание проекта

Данный проект ETL предназначен для автоматического сбора, обработки и сохранения данных о погоде из различных источников. Проект интегрирует данные в реальном времени с использованием MongoDB для неструктурированных данных, Redis для кэширования и быстрого доступа, а также PostgreSQL для структурированных данных, подходящих для комплексного анализа.

## Структура проекта

- `app/` - основной каталог приложений.
  - `decorators.py` - модуль с декораторами для логирования.
  - `main.py` - основной исполняемый скрипт проекта.
  - `mongo_insert.py` - вставка данных в MongoDB.
  - `postgres_insert.py` - вставка данных в PostgreSQL.
  - `redis_insert.py` - вставка данных в Redis.
  - `scheduler.py` - планировщик задач для регулярного сбора данных.
  - `topics.py` - определения топиков для Kafka.
- `etl_test/` - тесты для ETL процессов.
- `microservices/` - API микросервисы для доступа к данным.
- `.gitignore` - файл для исключения из репозитория.
- `requirements.txt` - зависимости проекта.
- `README.md` - описание проекта.

## Подключение к базам данных

### MongoDB. Настроен через облачный сервис, с использованием MongoDB Cloud / Compass. 

- Строка подключения: `mongodb+srv://shtyrovin:test1111@cluster0.aagznte.mongodb.net/WeatherData?retryWrites=true&w=majority`
- Используется для хранения неструктурированных данных о погоде.

### Redis. Настроен на локальном сервере через memurai.

- Подключение: `redis://localhost:6379/0`
- Используется в качестве кэша для быстрого доступа к наиболее востребованным данным.

### PostgreSQL

- Параметры подключения: user `postgres`, password `1111`, host `localhost`, port `5432`, database `postgres`.
- Используется для хранения структурированных данных о погоде, подходящих для комплексного анализа.

## Микросервисы

Микросервисы обеспечивают REST API для доступа к данным:

- `mongo_ms.py` - предоставляет доступ к данным MongoDB.
- `postgres_ms.py` - предоставляет доступ к данным PostgreSQL.
- `redis_ms.py` - предоставляет доступ к данным Redis.

### API Endpoints

- MongoDB: `http://127.0.0.1:5001/mongo/data`
- Redis: `http://127.0.0.1:5003/redis/data`
- PostgreSQL: `http://127.0.0.1:5002/postgres/data`

## Тестирование

Включает в себя тесты для проверки корректности вставки данных в каждую из баз данных:

- `test_mongo_insert.py` - проверяет вставку в MongoDB.
- `test_postgres_insert.py` - проверяет вставку в PostgreSQL.
- `test_redis_insert.py` - проверяет вставку в Redis.

## Запланированные задачи

`scheduler.py` используется для автоматизации сбора данных:

- Регулярное обновление данных о погоде из API и их вставка в MongoDB каждый час.
- Обработка и вставка сообщений из Kafka в PostgreSQL каждый час.

## Запуск проекта

Для запуска использовал библиотеки из `requirements.txt`
